use super::*;
use account::AccountId20;
use frame_support::assert_ok;
use moonbase_runtime::{
    asset_config::AssetRegistrarMetadata, xcm_config::AssetType, AssetManager, Runtime,
    RuntimeEvent, RuntimeOrigin, System, EVM,
};
use xcm::prelude::{GeneralIndex, PalletInstance, Parachain};
use xcm::v3::{Junctions, MultiLocation};

pub(crate) const ALITH: AccountId20 = AccountId20([
    242, 79, 243, 169, 207, 4, 199, 29, 188, 148, 208, 181, 102, 247, 162, 123, 148, 86, 108, 172,
]);
pub(crate) const BALTHAZAR: AccountId20 = AccountId20([
    60, 208, 167, 5, 162, 220, 101, 229, 177, 225, 32, 88, 150, 186, 162, 190, 138, 7, 198, 224,
]);
const INITIAL_EVM_BALANCE: u128 = 100 * 10u128.saturating_pow(18);
pub(crate) const PALLET_DERIVATIVE_ACCOUNT: [u8; 20] = [
    42, 161, 229, 255, 198, 29, 21, 138, 248, 84, 250, 40, 179, 31, 184, 119, 34, 232, 59, 100,
];
const XCTRB: u128 = 266833909807825597260388579262846980782;

pub(crate) fn new_ext(para_id: u32) -> sp_io::TestExternalities {
    let mut t = frame_system::GenesisConfig::default()
        .build_storage::<Runtime>()
        .unwrap();

    // set parachain id
    let parachain_info_config = parachain_info::GenesisConfig {
        parachain_id: para_id.into(),
    };
    <parachain_info::GenesisConfig as GenesisBuild<Runtime, _>>::assimilate_storage(
        &parachain_info_config,
        &mut t,
    )
    .unwrap();

    // set initial balances
    pallet_balances::GenesisConfig::<Runtime> {
        balances: vec![
            (ALITH, INITIAL_EVM_BALANCE),
            (BALTHAZAR, INITIAL_EVM_BALANCE),
            (PALLET_DERIVATIVE_ACCOUNT.into(), INITIAL_EVM_BALANCE),
        ],
    }
    .assimilate_storage(&mut t)
    .unwrap();

    let mut ext = sp_io::TestExternalities::new(t);
    ext.execute_with(|| System::set_block_number(1));
    ext
}

pub(crate) fn create_xctrb() {
    let asset = AssetType::Xcm(MultiLocation {
        parents: 1,
        interior: Junctions::X3(Parachain(1_000), PalletInstance(50), GeneralIndex(872)),
    });
    let metadata = AssetRegistrarMetadata {
        name: b"Tellor Tribute".to_vec(),
        symbol: b"xcTRB".to_vec(),
        decimals: 18,
        is_frozen: false,
    };
    assert_ok!(AssetManager::register_foreign_asset(
        RuntimeOrigin::root(),
        asset.clone(),
        metadata.clone(),
        1,
        true
    ));
    System::assert_last_event(RuntimeEvent::AssetManager(
        pallet_asset_manager::Event::ForeignAssetRegistered {
            asset_id: XCTRB,
            asset,
            metadata,
        },
    ));
}

pub(crate) mod contracts {
    use super::*;
    use ethabi::{encode, Event, EventParam, Hash, ParamType, Token};
    use frame_support::assert_ok;
    use sp_runtime::app_crypto::sp_core::U256;

    pub(crate) mod registry {
        use super::*;

        pub(crate) const REGISTRY_CONTRACT_ADDRESS: [u8; 20] = [
            192, 30, 231, 241, 14, 164, 175, 70, 115, 207, 255, 98, 113, 14, 29, 119, 146, 171,
            168, 243,
        ];
        // bytecode:object value from ParachainRegistry.json, generated by forge build
        const REGISTRY_CONTRACT_BYTECODE: [u8; 4558] = [
            96, 128, 96, 64, 82, 52, 128, 21, 97, 0, 16, 87, 96, 0, 128, 253, 91, 80, 97, 17, 174,
            128, 97, 0, 32, 96, 0, 57, 96, 0, 243, 254, 96, 128, 96, 64, 82, 52, 128, 21, 97, 0,
            16, 87, 96, 0, 128, 253, 91, 80, 96, 4, 54, 16, 97, 0, 76, 87, 96, 0, 53, 96, 224, 28,
            128, 99, 48, 37, 123, 247, 20, 97, 0, 81, 87, 128, 99, 96, 114, 55, 127, 20, 97, 0,
            122, 87, 128, 99, 203, 230, 4, 103, 20, 97, 0, 143, 87, 128, 99, 235, 237, 202, 44, 20,
            97, 0, 175, 87, 91, 96, 0, 128, 253, 91, 97, 0, 100, 97, 0, 95, 54, 96, 4, 97, 10, 75,
            86, 91, 97, 0, 194, 86, 91, 96, 64, 81, 97, 0, 113, 145, 144, 97, 11, 50, 86, 91, 96,
            64, 81, 128, 145, 3, 144, 243, 91, 97, 0, 141, 97, 0, 136, 54, 96, 4, 97, 13, 77, 86,
            91, 97, 3, 30, 86, 91, 0, 91, 97, 0, 162, 97, 0, 157, 54, 96, 4, 97, 14, 246, 86, 91,
            97, 6, 28, 86, 91, 96, 64, 81, 97, 0, 113, 145, 144, 97, 15, 41, 86, 91, 97, 0, 100,
            97, 0, 189, 54, 96, 4, 97, 15, 139, 86, 91, 97, 6, 162, 86, 91, 97, 0, 202, 97, 9, 0,
            86, 91, 96, 1, 96, 1, 96, 160, 27, 3, 128, 131, 22, 96, 0, 144, 129, 82, 96, 1, 96, 32,
            129, 129, 82, 96, 64, 128, 132, 32, 84, 99, 255, 255, 255, 255, 144, 129, 22, 133, 82,
            132, 131, 82, 147, 129, 144, 32, 129, 81, 96, 192, 129, 1, 131, 82, 129, 84, 149, 134,
            22, 129, 82, 100, 1, 0, 0, 0, 0, 144, 149, 4, 144, 149, 22, 145, 132, 1, 145, 144, 145,
            82, 144, 131, 1, 128, 84, 146, 147, 146, 145, 132, 1, 145, 97, 1, 47, 144, 97, 15, 166,
            86, 91, 128, 96, 31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96,
            64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 97, 1, 91, 144, 97,
            15, 166, 86, 91, 128, 21, 97, 1, 168, 87, 128, 96, 31, 16, 97, 1, 125, 87, 97, 1, 0,
            128, 131, 84, 4, 2, 131, 82, 145, 96, 32, 1, 145, 97, 1, 168, 86, 91, 130, 1, 145, 144,
            96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 129, 82, 144, 96, 1, 1, 144, 96, 32, 1,
            128, 131, 17, 97, 1, 139, 87, 130, 144, 3, 96, 31, 22, 130, 1, 145, 91, 80, 80, 80,
            145, 131, 82, 80, 80, 96, 2, 130, 1, 84, 96, 32, 128, 131, 1, 145, 144, 145, 82, 96,
            64, 128, 81, 128, 130, 1, 130, 82, 96, 3, 133, 1, 128, 84, 96, 255, 22, 130, 82, 96, 4,
            134, 1, 128, 84, 132, 81, 129, 135, 2, 129, 1, 135, 1, 134, 82, 129, 129, 82, 148, 144,
            150, 1, 149, 146, 148, 145, 147, 133, 131, 1, 147, 144, 146, 96, 0, 144, 132, 1, 91,
            130, 130, 16, 21, 97, 2, 167, 87, 131, 130, 144, 96, 0, 82, 96, 32, 96, 0, 32, 1, 128,
            84, 97, 2, 26, 144, 97, 15, 166, 86, 91, 128, 96, 31, 1, 96, 32, 128, 145, 4, 2, 96,
            32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32,
            1, 130, 128, 84, 97, 2, 70, 144, 97, 15, 166, 86, 91, 128, 21, 97, 2, 147, 87, 128, 96,
            31, 16, 97, 2, 104, 87, 97, 1, 0, 128, 131, 84, 4, 2, 131, 82, 145, 96, 32, 1, 145, 97,
            2, 147, 86, 91, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 129,
            82, 144, 96, 1, 1, 144, 96, 32, 1, 128, 131, 17, 97, 2, 118, 87, 130, 144, 3, 96, 31,
            22, 130, 1, 145, 91, 80, 80, 80, 80, 80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 1,
            251, 86, 91, 80, 80, 80, 145, 82, 80, 80, 129, 82, 96, 64, 128, 81, 96, 192, 129, 1,
            130, 82, 96, 5, 132, 1, 84, 103, 255, 255, 255, 255, 255, 255, 255, 255, 128, 130, 22,
            131, 82, 96, 1, 96, 64, 27, 128, 131, 4, 130, 22, 96, 32, 133, 129, 1, 145, 144, 145,
            82, 96, 1, 96, 128, 27, 132, 4, 131, 22, 149, 133, 1, 149, 144, 149, 82, 96, 1, 96,
            192, 27, 144, 146, 4, 129, 22, 96, 96, 132, 1, 82, 96, 6, 144, 149, 1, 84, 128, 134,
            22, 96, 128, 132, 1, 82, 4, 144, 147, 22, 96, 160, 132, 1, 82, 1, 82, 146, 145, 80, 80,
            86, 91, 96, 0, 97, 8, 12, 96, 1, 96, 1, 96, 160, 27, 3, 22, 99, 52, 59, 62, 0, 96, 64,
            81, 128, 96, 64, 1, 96, 64, 82, 128, 96, 1, 96, 255, 22, 129, 82, 96, 32, 1, 97, 3, 80,
            138, 138, 97, 6, 28, 86, 91, 129, 82, 80, 96, 64, 81, 130, 99, 255, 255, 255, 255, 22,
            96, 224, 27, 129, 82, 96, 4, 1, 97, 3, 111, 145, 144, 97, 15, 224, 86, 91, 96, 32, 96,
            64, 81, 128, 131, 3, 129, 134, 90, 250, 21, 128, 21, 97, 3, 140, 87, 61, 96, 0, 128,
            62, 61, 96, 0, 253, 91, 80, 80, 80, 80, 96, 64, 81, 61, 96, 31, 25, 96, 31, 130, 1, 22,
            130, 1, 128, 96, 64, 82, 80, 129, 1, 144, 97, 3, 176, 145, 144, 97, 15, 243, 86, 91,
            144, 80, 51, 96, 1, 96, 1, 96, 160, 27, 3, 130, 22, 20, 97, 3, 250, 87, 96, 64, 81, 98,
            70, 27, 205, 96, 229, 27, 129, 82, 96, 32, 96, 4, 130, 1, 82, 96, 9, 96, 36, 130, 1,
            82, 104, 39, 55, 186, 16, 55, 187, 183, 50, 185, 96, 185, 27, 96, 68, 130, 1, 82, 96,
            100, 1, 96, 64, 81, 128, 145, 3, 144, 253, 91, 96, 64, 81, 128, 96, 192, 1, 96, 64, 82,
            128, 135, 99, 255, 255, 255, 255, 22, 129, 82, 96, 32, 1, 51, 96, 1, 96, 1, 96, 160,
            27, 3, 22, 129, 82, 96, 32, 1, 134, 96, 64, 81, 96, 32, 1, 97, 4, 68, 145, 144, 96,
            248, 145, 144, 145, 27, 96, 1, 96, 1, 96, 248, 27, 3, 25, 22, 129, 82, 96, 1, 1, 144,
            86, 91, 96, 64, 128, 81, 96, 31, 25, 129, 132, 3, 1, 129, 82, 145, 129, 82, 144, 130,
            82, 96, 32, 130, 129, 1, 136, 144, 82, 130, 130, 1, 135, 144, 82, 96, 96, 144, 146, 1,
            133, 144, 82, 99, 255, 255, 255, 255, 128, 138, 22, 96, 0, 144, 129, 82, 128, 132, 82,
            130, 144, 32, 132, 81, 129, 84, 148, 134, 1, 81, 96, 1, 96, 1, 96, 160, 27, 3, 22, 100,
            1, 0, 0, 0, 0, 2, 96, 1, 96, 1, 96, 192, 27, 3, 25, 144, 149, 22, 146, 22, 145, 144,
            145, 23, 146, 144, 146, 23, 130, 85, 130, 1, 81, 96, 1, 130, 1, 144, 97, 4, 194, 144,
            130, 97, 16, 95, 86, 91, 80, 96, 96, 130, 1, 81, 96, 2, 130, 1, 85, 96, 128, 130, 1,
            81, 128, 81, 96, 3, 131, 1, 128, 84, 96, 255, 25, 22, 96, 255, 144, 146, 22, 145, 144,
            145, 23, 129, 85, 96, 32, 128, 131, 1, 81, 128, 81, 97, 5, 1, 146, 96, 4, 135, 1, 146,
            1, 144, 97, 9, 113, 86, 91, 80, 80, 80, 96, 160, 145, 130, 1, 81, 128, 81, 96, 5, 131,
            1, 128, 84, 96, 32, 128, 133, 1, 81, 96, 64, 128, 135, 1, 81, 96, 96, 128, 137, 1, 81,
            103, 255, 255, 255, 255, 255, 255, 255, 255, 152, 137, 22, 111, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 25, 151, 136, 22, 23, 96,
            1, 96, 64, 27, 149, 138, 22, 134, 2, 23, 111, 255, 255, 255, 255, 255, 255, 255, 255,
            255, 255, 255, 255, 255, 255, 255, 255, 22, 96, 1, 96, 128, 27, 147, 138, 22, 147, 144,
            147, 2, 96, 1, 96, 1, 96, 192, 27, 3, 22, 146, 144, 146, 23, 96, 1, 96, 192, 27, 146,
            137, 22, 146, 144, 146, 2, 145, 144, 145, 23, 144, 149, 85, 96, 128, 135, 1, 81, 96, 6,
            144, 152, 1, 128, 84, 151, 144, 153, 1, 81, 151, 134, 22, 150, 144, 147, 22, 149, 144,
            149, 23, 149, 144, 147, 22, 144, 147, 2, 147, 144, 147, 23, 144, 147, 85, 51, 96, 0,
            129, 129, 82, 96, 1, 133, 82, 130, 144, 32, 128, 84, 99, 255, 255, 255, 255, 25, 22,
            99, 255, 255, 255, 255, 140, 22, 144, 129, 23, 144, 145, 85, 130, 81, 130, 129, 82,
            148, 133, 1, 82, 144, 131, 1, 82, 127, 89, 36, 164, 179, 221, 176, 26, 120, 157, 125,
            55, 4, 178, 217, 71, 195, 215, 31, 18, 168, 136, 206, 120, 85, 237, 107, 27, 227, 36,
            45, 133, 14, 145, 1, 96, 64, 81, 128, 145, 3, 144, 161, 80, 80, 80, 80, 80, 80, 86, 91,
            96, 64, 128, 81, 96, 2, 128, 130, 82, 96, 96, 130, 129, 1, 144, 147, 82, 96, 0, 145,
            144, 129, 96, 32, 1, 91, 96, 96, 129, 82, 96, 32, 1, 144, 96, 1, 144, 3, 144, 129, 97,
            6, 54, 87, 144, 80, 80, 144, 80, 97, 6, 86, 132, 97, 8, 118, 86, 91, 129, 96, 0, 129,
            81, 129, 16, 97, 6, 105, 87, 97, 6, 105, 97, 17, 31, 86, 91, 96, 32, 2, 96, 32, 1, 1,
            129, 144, 82, 80, 97, 6, 125, 131, 97, 8, 198, 86, 91, 129, 96, 1, 129, 81, 129, 16,
            97, 6, 144, 87, 97, 6, 144, 97, 17, 31, 86, 91, 96, 32, 144, 129, 2, 145, 144, 145, 1,
            1, 82, 147, 146, 80, 80, 80, 86, 91, 97, 6, 170, 97, 9, 0, 86, 91, 99, 255, 255, 255,
            255, 130, 129, 22, 96, 0, 144, 129, 82, 96, 32, 129, 129, 82, 96, 64, 145, 130, 144,
            32, 130, 81, 96, 192, 129, 1, 132, 82, 129, 84, 148, 133, 22, 129, 82, 100, 1, 0, 0, 0,
            0, 144, 148, 4, 96, 1, 96, 1, 96, 160, 27, 3, 22, 145, 132, 1, 145, 144, 145, 82, 96,
            1, 129, 1, 128, 84, 145, 146, 132, 1, 145, 97, 6, 254, 144, 97, 15, 166, 86, 91, 128,
            96, 31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96, 64, 81, 144, 129, 1, 96, 64, 82, 128,
            146, 145, 144, 129, 129, 82, 96, 32, 1, 130, 128, 84, 97, 7, 42, 144, 97, 15, 166, 86,
            91, 128, 21, 97, 7, 119, 87, 128, 96, 31, 16, 97, 7, 76, 87, 97, 1, 0, 128, 131, 84, 4,
            2, 131, 82, 145, 96, 32, 1, 145, 97, 7, 119, 86, 91, 130, 1, 145, 144, 96, 0, 82, 96,
            32, 96, 0, 32, 144, 91, 129, 84, 129, 82, 144, 96, 1, 1, 144, 96, 32, 1, 128, 131, 17,
            97, 7, 90, 87, 130, 144, 3, 96, 31, 22, 130, 1, 145, 91, 80, 80, 80, 145, 131, 82, 80,
            80, 96, 2, 130, 1, 84, 96, 32, 128, 131, 1, 145, 144, 145, 82, 96, 64, 128, 81, 128,
            130, 1, 130, 82, 96, 3, 133, 1, 128, 84, 96, 255, 22, 130, 82, 96, 4, 134, 1, 128, 84,
            132, 81, 129, 135, 2, 129, 1, 135, 1, 134, 82, 129, 129, 82, 148, 144, 150, 1, 149,
            146, 148, 145, 147, 133, 131, 1, 147, 144, 146, 96, 0, 144, 132, 1, 91, 130, 130, 16,
            21, 97, 2, 167, 87, 131, 130, 144, 96, 0, 82, 96, 32, 96, 0, 32, 1, 128, 84, 97, 7,
            233, 144, 97, 15, 166, 86, 91, 128, 96, 31, 1, 96, 32, 128, 145, 4, 2, 96, 32, 1, 96,
            64, 81, 144, 129, 1, 96, 64, 82, 128, 146, 145, 144, 129, 129, 82, 96, 32, 1, 130, 128,
            84, 97, 8, 21, 144, 97, 15, 166, 86, 91, 128, 21, 97, 8, 98, 87, 128, 96, 31, 16, 97,
            8, 55, 87, 97, 1, 0, 128, 131, 84, 4, 2, 131, 82, 145, 96, 32, 1, 145, 97, 8, 98, 86,
            91, 130, 1, 145, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144, 91, 129, 84, 129, 82, 144, 96,
            1, 1, 144, 96, 32, 1, 128, 131, 17, 97, 8, 69, 87, 130, 144, 3, 96, 31, 22, 130, 1,
            145, 91, 80, 80, 80, 80, 80, 129, 82, 96, 32, 1, 144, 96, 1, 1, 144, 97, 7, 202, 86,
            91, 96, 64, 81, 96, 1, 96, 1, 96, 224, 27, 3, 25, 96, 224, 131, 144, 27, 22, 96, 32,
            130, 1, 82, 96, 96, 144, 96, 36, 1, 96, 64, 128, 81, 96, 31, 25, 129, 132, 3, 1, 129,
            82, 144, 130, 144, 82, 97, 8, 176, 145, 96, 32, 1, 97, 17, 53, 86, 91, 96, 64, 81, 96,
            32, 129, 131, 3, 3, 129, 82, 144, 96, 64, 82, 144, 80, 145, 144, 80, 86, 91, 96, 64,
            81, 96, 1, 96, 1, 96, 248, 27, 3, 25, 96, 248, 131, 144, 27, 22, 96, 32, 130, 1, 82,
            96, 96, 144, 96, 33, 1, 96, 64, 128, 81, 96, 31, 25, 129, 132, 3, 1, 129, 82, 144, 130,
            144, 82, 97, 8, 176, 145, 96, 32, 1, 97, 17, 91, 86, 91, 96, 64, 128, 81, 96, 192, 129,
            1, 130, 82, 96, 0, 128, 130, 82, 96, 32, 128, 131, 1, 130, 144, 82, 96, 96, 131, 133,
            1, 129, 144, 82, 128, 132, 1, 131, 144, 82, 132, 81, 128, 134, 1, 144, 149, 82, 145,
            132, 82, 131, 1, 82, 144, 96, 128, 130, 1, 144, 129, 82, 96, 64, 128, 81, 96, 192, 129,
            1, 130, 82, 96, 0, 128, 130, 82, 96, 32, 130, 129, 1, 130, 144, 82, 146, 130, 1, 129,
            144, 82, 96, 96, 130, 1, 129, 144, 82, 96, 128, 130, 1, 129, 144, 82, 96, 160, 130, 1,
            82, 145, 1, 82, 144, 86, 91, 130, 128, 84, 130, 130, 85, 144, 96, 0, 82, 96, 32, 96, 0,
            32, 144, 129, 1, 146, 130, 21, 97, 9, 183, 87, 145, 96, 32, 2, 130, 1, 91, 130, 129,
            17, 21, 97, 9, 183, 87, 130, 81, 130, 144, 97, 9, 167, 144, 130, 97, 16, 95, 86, 91,
            80, 145, 96, 32, 1, 145, 144, 96, 1, 1, 144, 97, 9, 145, 86, 91, 80, 97, 9, 195, 146,
            145, 80, 97, 9, 199, 86, 91, 80, 144, 86, 91, 128, 130, 17, 21, 97, 9, 195, 87, 96, 0,
            97, 9, 219, 130, 130, 97, 9, 228, 86, 91, 80, 96, 1, 1, 97, 9, 199, 86, 91, 80, 128,
            84, 97, 9, 240, 144, 97, 15, 166, 86, 91, 96, 0, 130, 85, 128, 96, 31, 16, 97, 10, 0,
            87, 80, 80, 86, 91, 96, 31, 1, 96, 32, 144, 4, 144, 96, 0, 82, 96, 32, 96, 0, 32, 144,
            129, 1, 144, 97, 10, 30, 145, 144, 97, 10, 33, 86, 91, 80, 86, 91, 91, 128, 130, 17,
            21, 97, 9, 195, 87, 96, 0, 129, 85, 96, 1, 1, 97, 10, 34, 86, 91, 96, 1, 96, 1, 96,
            160, 27, 3, 129, 22, 129, 20, 97, 10, 30, 87, 96, 0, 128, 253, 91, 96, 0, 96, 32, 130,
            132, 3, 18, 21, 97, 10, 93, 87, 96, 0, 128, 253, 91, 129, 53, 97, 10, 104, 129, 97, 10,
            54, 86, 91, 147, 146, 80, 80, 80, 86, 91, 96, 0, 91, 131, 129, 16, 21, 97, 10, 138, 87,
            129, 129, 1, 81, 131, 130, 1, 82, 96, 32, 1, 97, 10, 114, 86, 91, 80, 80, 96, 0, 145,
            1, 82, 86, 91, 96, 0, 129, 81, 128, 132, 82, 97, 10, 171, 129, 96, 32, 134, 1, 96, 32,
            134, 1, 97, 10, 111, 86, 91, 96, 31, 1, 96, 31, 25, 22, 146, 144, 146, 1, 96, 32, 1,
            146, 145, 80, 80, 86, 91, 96, 0, 96, 64, 131, 1, 96, 255, 131, 81, 22, 132, 82, 96, 32,
            128, 132, 1, 81, 96, 64, 130, 135, 1, 82, 130, 129, 81, 128, 133, 82, 96, 96, 136, 1,
            145, 80, 96, 96, 129, 96, 5, 27, 137, 1, 1, 148, 80, 131, 131, 1, 146, 80, 96, 0, 91,
            129, 129, 16, 21, 97, 11, 37, 87, 96, 95, 25, 137, 135, 3, 1, 131, 82, 97, 11, 19, 134,
            133, 81, 97, 10, 147, 86, 91, 149, 80, 146, 132, 1, 146, 145, 132, 1, 145, 96, 1, 1,
            97, 10, 247, 86, 91, 80, 147, 151, 150, 80, 80, 80, 80, 80, 80, 80, 86, 91, 96, 32,
            129, 82, 99, 255, 255, 255, 255, 130, 81, 22, 96, 32, 130, 1, 82, 96, 1, 128, 96, 160,
            27, 3, 96, 32, 131, 1, 81, 22, 96, 64, 130, 1, 82, 96, 0, 96, 64, 131, 1, 81, 97, 1,
            96, 128, 96, 96, 133, 1, 82, 97, 11, 115, 97, 1, 128, 133, 1, 131, 97, 10, 147, 86, 91,
            145, 80, 96, 96, 133, 1, 81, 96, 128, 133, 1, 82, 96, 128, 133, 1, 81, 96, 31, 25, 133,
            132, 3, 1, 96, 160, 134, 1, 82, 97, 11, 154, 131, 130, 97, 10, 191, 86, 91, 96, 160,
            150, 135, 1, 81, 128, 81, 103, 255, 255, 255, 255, 255, 255, 255, 255, 144, 129, 22,
            96, 192, 137, 1, 82, 96, 32, 130, 1, 81, 129, 22, 96, 224, 137, 1, 82, 96, 64, 130, 1,
            81, 129, 22, 97, 1, 0, 137, 1, 82, 96, 96, 130, 1, 81, 129, 22, 97, 1, 32, 137, 1, 82,
            96, 128, 130, 1, 81, 129, 22, 97, 1, 64, 137, 1, 82, 151, 1, 81, 144, 150, 22, 145,
            144, 148, 1, 82, 80, 145, 146, 145, 80, 80, 86, 91, 128, 53, 99, 255, 255, 255, 255,
            129, 22, 129, 20, 97, 12, 13, 87, 96, 0, 128, 253, 91, 145, 144, 80, 86, 91, 128, 53,
            96, 255, 129, 22, 129, 20, 97, 12, 13, 87, 96, 0, 128, 253, 91, 99, 78, 72, 123, 113,
            96, 224, 27, 96, 0, 82, 96, 65, 96, 4, 82, 96, 36, 96, 0, 253, 91, 96, 64, 128, 81,
            144, 129, 1, 103, 255, 255, 255, 255, 255, 255, 255, 255, 129, 17, 130, 130, 16, 23,
            21, 97, 12, 92, 87, 97, 12, 92, 97, 12, 35, 86, 91, 96, 64, 82, 144, 86, 91, 96, 64,
            81, 96, 31, 130, 1, 96, 31, 25, 22, 129, 1, 103, 255, 255, 255, 255, 255, 255, 255,
            255, 129, 17, 130, 130, 16, 23, 21, 97, 12, 139, 87, 97, 12, 139, 97, 12, 35, 86, 91,
            96, 64, 82, 145, 144, 80, 86, 91, 128, 53, 103, 255, 255, 255, 255, 255, 255, 255, 255,
            129, 22, 129, 20, 97, 12, 13, 87, 96, 0, 128, 253, 91, 96, 0, 96, 192, 130, 132, 3, 18,
            21, 97, 12, 189, 87, 96, 0, 128, 253, 91, 96, 64, 81, 96, 192, 129, 1, 129, 129, 16,
            103, 255, 255, 255, 255, 255, 255, 255, 255, 130, 17, 23, 21, 97, 12, 224, 87, 97, 12,
            224, 97, 12, 35, 86, 91, 96, 64, 82, 144, 80, 128, 97, 12, 239, 131, 97, 12, 147, 86,
            91, 129, 82, 97, 12, 253, 96, 32, 132, 1, 97, 12, 147, 86, 91, 96, 32, 130, 1, 82, 97,
            13, 14, 96, 64, 132, 1, 97, 12, 147, 86, 91, 96, 64, 130, 1, 82, 97, 13, 31, 96, 96,
            132, 1, 97, 12, 147, 86, 91, 96, 96, 130, 1, 82, 97, 13, 48, 96, 128, 132, 1, 97, 12,
            147, 86, 91, 96, 128, 130, 1, 82, 97, 13, 65, 96, 160, 132, 1, 97, 12, 147, 86, 91, 96,
            160, 130, 1, 82, 80, 146, 145, 80, 80, 86, 91, 96, 0, 128, 96, 0, 128, 96, 0, 97, 1,
            64, 134, 136, 3, 18, 21, 97, 13, 102, 87, 96, 0, 128, 253, 91, 97, 13, 111, 134, 97,
            11, 249, 86, 91, 148, 80, 97, 13, 125, 96, 32, 135, 1, 97, 12, 18, 86, 91, 147, 80, 96,
            64, 134, 1, 53, 146, 80, 103, 255, 255, 255, 255, 255, 255, 255, 255, 128, 96, 96, 136,
            1, 53, 17, 21, 97, 13, 160, 87, 96, 0, 128, 253, 91, 96, 96, 135, 1, 53, 135, 1, 96,
            64, 129, 138, 3, 18, 21, 97, 13, 183, 87, 96, 0, 128, 253, 91, 97, 13, 191, 97, 12, 57,
            86, 91, 97, 13, 200, 130, 97, 12, 18, 86, 91, 129, 82, 130, 96, 32, 131, 1, 53, 17, 21,
            97, 13, 219, 87, 96, 0, 128, 253, 91, 96, 32, 130, 1, 53, 130, 1, 145, 80, 137, 96, 31,
            131, 1, 18, 97, 13, 243, 87, 96, 0, 128, 253, 91, 130, 130, 53, 17, 21, 97, 14, 4, 87,
            97, 14, 4, 97, 12, 35, 86, 91, 97, 14, 20, 96, 32, 131, 53, 96, 5, 27, 1, 97, 12, 98,
            86, 91, 130, 53, 128, 130, 82, 96, 32, 128, 131, 1, 146, 145, 96, 5, 27, 133, 1, 1,
            140, 16, 21, 97, 14, 50, 87, 96, 0, 128, 253, 91, 96, 32, 132, 1, 91, 96, 32, 133, 53,
            96, 5, 27, 134, 1, 1, 129, 16, 21, 97, 14, 208, 87, 133, 129, 53, 17, 21, 97, 14, 86,
            87, 96, 0, 128, 253, 91, 128, 53, 133, 1, 141, 96, 63, 130, 1, 18, 97, 14, 105, 87, 96,
            0, 128, 253, 91, 96, 32, 129, 1, 53, 135, 129, 17, 21, 97, 14, 126, 87, 97, 14, 126,
            97, 12, 35, 86, 91, 97, 14, 145, 96, 31, 130, 1, 96, 31, 25, 22, 96, 32, 1, 97, 12, 98,
            86, 91, 129, 129, 82, 143, 96, 64, 131, 133, 1, 1, 17, 21, 97, 14, 166, 87, 96, 0, 128,
            253, 91, 129, 96, 64, 132, 1, 96, 32, 131, 1, 55, 96, 0, 96, 32, 131, 131, 1, 1, 82,
            128, 134, 82, 80, 80, 80, 96, 32, 131, 1, 146, 80, 96, 32, 129, 1, 144, 80, 97, 14, 55,
            86, 91, 80, 96, 32, 131, 1, 82, 80, 147, 80, 97, 14, 234, 145, 80, 136, 144, 80, 96,
            128, 136, 1, 97, 12, 171, 86, 91, 144, 80, 146, 149, 80, 146, 149, 144, 147, 80, 86,
            91, 96, 0, 128, 96, 64, 131, 133, 3, 18, 21, 97, 15, 9, 87, 96, 0, 128, 253, 91, 97,
            15, 18, 131, 97, 11, 249, 86, 91, 145, 80, 97, 15, 32, 96, 32, 132, 1, 97, 12, 18, 86,
            91, 144, 80, 146, 80, 146, 144, 80, 86, 91, 96, 0, 96, 32, 128, 131, 1, 129, 132, 82,
            128, 133, 81, 128, 131, 82, 96, 64, 134, 1, 145, 80, 96, 64, 129, 96, 5, 27, 135, 1, 1,
            146, 80, 131, 135, 1, 96, 0, 91, 130, 129, 16, 21, 97, 15, 126, 87, 96, 63, 25, 136,
            134, 3, 1, 132, 82, 97, 15, 108, 133, 131, 81, 97, 10, 147, 86, 91, 148, 80, 146, 133,
            1, 146, 144, 133, 1, 144, 96, 1, 1, 97, 15, 80, 86, 91, 80, 146, 151, 150, 80, 80, 80,
            80, 80, 80, 80, 86, 91, 96, 0, 96, 32, 130, 132, 3, 18, 21, 97, 15, 157, 87, 96, 0,
            128, 253, 91, 97, 10, 104, 130, 97, 11, 249, 86, 91, 96, 1, 129, 129, 28, 144, 130, 22,
            128, 97, 15, 186, 87, 96, 127, 130, 22, 145, 80, 91, 96, 32, 130, 16, 129, 3, 97, 15,
            218, 87, 99, 78, 72, 123, 113, 96, 224, 27, 96, 0, 82, 96, 34, 96, 4, 82, 96, 36, 96,
            0, 253, 91, 80, 145, 144, 80, 86, 91, 96, 32, 129, 82, 96, 0, 97, 10, 104, 96, 32, 131,
            1, 132, 97, 10, 191, 86, 91, 96, 0, 96, 32, 130, 132, 3, 18, 21, 97, 16, 5, 87, 96, 0,
            128, 253, 91, 129, 81, 97, 10, 104, 129, 97, 10, 54, 86, 91, 96, 31, 130, 17, 21, 97,
            16, 90, 87, 96, 0, 129, 129, 82, 96, 32, 129, 32, 96, 31, 133, 1, 96, 5, 28, 129, 1,
            96, 32, 134, 16, 21, 97, 16, 55, 87, 80, 128, 91, 96, 31, 133, 1, 96, 5, 28, 130, 1,
            145, 80, 91, 129, 129, 16, 21, 97, 16, 86, 87, 130, 129, 85, 96, 1, 1, 97, 16, 67, 86,
            91, 80, 80, 80, 91, 80, 80, 80, 86, 91, 129, 81, 103, 255, 255, 255, 255, 255, 255,
            255, 255, 129, 17, 21, 97, 16, 121, 87, 97, 16, 121, 97, 12, 35, 86, 91, 97, 16, 141,
            129, 97, 16, 135, 132, 84, 97, 15, 166, 86, 91, 132, 97, 16, 16, 86, 91, 96, 32, 128,
            96, 31, 131, 17, 96, 1, 129, 20, 97, 16, 194, 87, 96, 0, 132, 21, 97, 16, 170, 87, 80,
            133, 131, 1, 81, 91, 96, 0, 25, 96, 3, 134, 144, 27, 28, 25, 22, 96, 1, 133, 144, 27,
            23, 133, 85, 97, 16, 86, 86, 91, 96, 0, 133, 129, 82, 96, 32, 129, 32, 96, 31, 25, 134,
            22, 145, 91, 130, 129, 16, 21, 97, 16, 241, 87, 136, 134, 1, 81, 130, 85, 148, 132, 1,
            148, 96, 1, 144, 145, 1, 144, 132, 1, 97, 16, 210, 86, 91, 80, 133, 130, 16, 21, 97,
            17, 15, 87, 135, 133, 1, 81, 96, 0, 25, 96, 3, 136, 144, 27, 96, 248, 22, 28, 25, 22,
            129, 85, 91, 80, 80, 80, 80, 80, 96, 1, 144, 129, 27, 1, 144, 85, 80, 86, 91, 99, 78,
            72, 123, 113, 96, 224, 27, 96, 0, 82, 96, 50, 96, 4, 82, 96, 36, 96, 0, 253, 91, 96, 0,
            129, 82, 96, 0, 130, 81, 97, 17, 78, 129, 96, 1, 133, 1, 96, 32, 135, 1, 97, 10, 111,
            86, 91, 145, 144, 145, 1, 96, 1, 1, 146, 145, 80, 80, 86, 91, 96, 1, 96, 250, 27, 129,
            82, 129, 81, 96, 0, 144, 97, 17, 78, 129, 96, 1, 133, 1, 96, 32, 135, 1, 97, 10, 111,
            86, 254, 162, 100, 105, 112, 102, 115, 88, 34, 18, 32, 203, 157, 231, 44, 50, 143, 2,
            238, 38, 100, 242, 124, 98, 112, 101, 68, 90, 27, 79, 75, 108, 24, 223, 206, 77, 171,
            37, 125, 190, 91, 114, 174, 100, 115, 111, 108, 99, 67, 0, 8, 20, 0, 51,
        ];

        pub(crate) fn parachain_registered(parachain: u32) -> (Vec<Hash>, Vec<u8>) {
            let event = Event {
                name: "ParachainRegistered".to_string(),
                // address caller, uint32 parachain, address owner
                inputs: vec![
                    EventParam {
                        name: "caller".to_string(),
                        kind: ParamType::Address,
                        indexed: false,
                    },
                    EventParam {
                        name: "parachain".to_string(),
                        kind: ParamType::Uint(32),
                        indexed: false,
                    },
                    EventParam {
                        name: "owner".to_string(),
                        kind: ParamType::Address,
                        indexed: false,
                    },
                ],
                anonymous: false,
            };
            // return expected topic and data
            (
                vec![event.signature()],
                encode(&vec![
                    Token::Address(PALLET_DERIVATIVE_ACCOUNT.into()),
                    Token::Uint(parachain.into()),
                    Token::Address(PALLET_DERIVATIVE_ACCOUNT.into()),
                ]),
            )
        }

        pub(crate) fn deploy() {
            let gas_limit = 10_000_000;
            let max_fee_per_gas = U256::from(1_250_000_000);

            // create parachain registry contract
            assert_ok!(EVM::create(
                RuntimeOrigin::root(),
                ALITH.into(),
                REGISTRY_CONTRACT_BYTECODE.into(),
                U256::zero(),
                gas_limit,
                max_fee_per_gas,
                None,
                None,
                Vec::new()
            ));
            System::assert_last_event(RuntimeEvent::EVM(pallet_evm::Event::Created {
                address: REGISTRY_CONTRACT_ADDRESS.into(),
            }));
        }
    }
}
